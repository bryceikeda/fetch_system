<?xml version="1.0"?>
<launch>
    <!-- Add world origin -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="world_broadcaster" args="0 0 0 0 0 0 1 world base_link" />

    <!-- Launch Fake Joints Simulator -->
    <include file="$(find simulator)/launch/fake_joints_simulator.launch" />

    <!-- Launch Manipulation for Fake Joints -->
    <include file="$(find manipulation)/launch/manipulation.launch">
        <arg name="fake_execution" value="true"/>
    </include>

    <!-- Launch Fake Gazebo Models -->
    <node name="simulator" pkg="simulator" type="model_states_publisher.py" output="screen"/>

    <!-- Launch Perception -->
    <include file="$(find perception)/launch/gazebo_perception.launch" />

    <!-- Launch World Monitor -->
    <include file="$(find world_monitor)/launch/world_monitor.launch">
        <arg name="yaml_path" value="$(find world_monitor)/config/object_definitions.yaml"/>
    </include>

    <!-- Move robot to ready state -->
    <node name="ready_pose" pkg="manipulation" type="ready_pose.py" output="screen"/>
    
    <!-- Launch Visualizer -->
    <node name="scene_graph" pkg="scene_graph" type="scene_graph_node.py" output="screen"/>

    <!-- Launch Visualizer (RViz) -->
    <include file="$(find visualizer)/launch/visualizer.launch"/>
</launch>
